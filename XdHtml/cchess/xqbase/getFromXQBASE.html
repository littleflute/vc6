
<HTML><HEAD><TITLE>getFromXQBASE</TITLE> 
<script src="../../blclass.js"  type="text/javascript" ></script> 
</HEAD><BODY>
<div id="pageLevel" style="display:none">2</div>
<div id = "idDivBlV" style="display:none;"><a href="?" >v0.1.124</a>
<a href="https://github.com/littleflute/vc6/edit/master/XdHtml/cchess/xqbase/getFromXQBASE.html" target="_blank" >github*</a>
</div>
<div id="blPageV"></div><div id="xddbg"></div>
<script type="text/javascript" src="../../xd.js"></script> 
<script>
var g_page_2_save_HTML = "";

function get_file_name(a,b){
	var r = "";
	var p = "C:\\Users\\13699\\xd1\\baidu\\VC6_EN\\VC6_EN\\VC6EN\\MyProjects\\XdHtml\\cchess\\xqbase\\";
	r = p + pageIdx + ".html";
	return r;
}

function get_file_length(a,b){ 	 
	var n = g_page_2_save_HTML.length;
	return "" + n;
}

function create_page(titleTxt,bodyHTML){
	var r = g_page_2_save_HTML; 
	return r;
}

function show_msg(msgTxt1,msgTxt2){  
	divMsg.innerHTML = msgTxt1;  
	btn3_Next.click();
}

function _create_page_2_save(title,bodyHTML){  
	var r = "";
	r = blo0.blCreatePage(title,bodyHTML);
	g_page_2_save_HTML = r;
}



function _ajaxWorkClass()
{
	var _getGameId = function(oBoss,txt , _color){
		var r = "";
		var a = txt.split("gameid%3D");
		var b = a[1].split("&am");
		var r = b[0]; 

		var d = blo0.blDiv(oBoss,oBoss.id+"_getGameId","_getGameId", _color); 
		d.innerHTML = r;
		

		return r;
	};
	var _getChinesPu = function(oBoss,txt,_color){
		var r = "";
		var a = txt.split("<pre>");
		var b = a[1].split("</pre>");
		var r = b[0];
		var d = blo0.blDiv(oBoss,oBoss.id+"_getChinesPu","d1",_color);
		d.innerHTML = r;
	};
	var _getECCO = function(oBoss,txt,_color){
		var r = "";
		var a = txt.split("ecco");
		var b = a[1].split("<b>");
		var c = b[1].split("</b>");
		var r = c[0];
		var d = blo0.blDiv(oBoss,oBoss.id+"_getECCO","d1_getECCO",_color);
		d.innerHTML = r;
	};
	var _getGetSrc = function(oBoss,_color){ 
		var d = blo0.blDiv(oBoss,oBoss.id+"_getGetSrc","_getGetSrc",_color); 
		d.b1 = blo0.blBtn(d,d.id + "b1","getSrc",blGrey[0]);
		d.b1.onclick = function(){
			alert("_getGetSrc");
		}
	};
	var _getBoard = function(oBoss,txt,_color){
		var r = "";
		var a = txt.split('<td background="/images/headerbg.gif">');
		var b = a[1].split("<br><br>");
		var t1 = "/pub/flashxq.swf";
		var t2 = "http://www.xqbase.com/pub/flashxq.swf";
		var t3 = "https://littleflute.github.io/cchess/ref/http/www.xqbase.com/pub/flashxq.swf";
		var r = b[0].replace(t1,t3); 

		var d = blo0.blDiv(oBoss,oBoss.id+"_getBoard","d1", _color);
		d.innerHTML = r;
	};
	var _myJob = function(txt){
		var id = _getGameId(divChess,txt,blGrey[0]);
		_getECCO(divChess,txt,blGrey[3]);
		_getBoard(divChess,txt,blGrey[5]);
		_getChinesPu(divChess,txt,blGrey[7]);
		_getGetSrc(divChess,blGrey[8]);
		_create_page_2_save("game"+id,divChess.parentElement.innerHTML);
	};
	this._2do = function(txt)
	{
		_myJob(txt);
		btn2_Save.click();
	}
}
var pageMax	= 8711;
var pageIdx = 8710;
var w = new _ajaxWorkClass;
var href = "http://www.xqbase.com/xqbase/?gameid=";
var toolBar = blo0.blDiv(document.body,"id_toolBar","toolBar","BlueViolet");
var btn1_Ajx = blo0.blBtn(toolBar,"btn1_Ajx","btn1_Ajx","gold");
var btn2_Save = blo0.blBtn(toolBar,"btn2_Save","btn2_Save","skyblue");
var btn3_Next = blo0.blBtn(toolBar,"btn3_Next",pageIdx,"gray");
var v = blo0.blDiv(document.body,"id_v","v","yellowgreen");
_createMyNav(v);
var l = blo0.blLink(v,"id_l","save","?xd=save","red"); l.style.display = "none";
var divMsg = blo0.blDiv(v,"divMsg","divMsg","gray");
var _targetWrapDiv = blo0.blDiv(v,"_targetWrapDiv","_targetWrapDiv","brown");
var divChess = blo0.blDiv(_targetWrapDiv,_targetWrapDiv.id + "","divChess","skyblue");
btn1_Ajx.onclick = function(){
	var ajxHref = href + pageIdx;
	blo0.blAjx(w,ajxHref);
}
btn2_Save.onclick = function(){
	l.click();
}

btn3_Next.onclick = function(){
    if(pageIdx>pageMax) return;
	pageIdx++;
	btn3_Next.innerHTML = pageIdx;
	btn1_Ajx.click();
}
 function _createMyNav(d){
	var url = "index.html";
	var index = blo0.blLink(d,d.id+"index","index",url,"lightblue");  
}
</script> 
</BODY>
</HTML>
