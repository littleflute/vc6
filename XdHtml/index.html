<HTML><HEAD><TITLE>cchess/index.html</TITLE> 
<script src="../blclass.js"  type="text/javascript" ></script> 
</HEAD><BODY>
<div id="pageLevel" style="display:none">1</div>
<div id = "idDivBlV" style="display:none;">v0.1.24</div>
<div id="blPageV"></div><div id="xddbg"></div>
<script type="text/javascript" src="../xd.js"></script> 
<script>
function get_file_name(a,b){
	var r = "";
	var p = "C:\\Users\\13699\\xd1\\baidu\\VC6_EN\\VC6_EN\\VC6EN\\MyProjects\\XdHtml\\cchess\\";
	r = p + pageIdx + ".html";
	return r;
}

function create_page(titleTxt,bodyHTML){
	var r = "";
	r = blo0.blCreatePage("xdtest1",divChess.innerHTML);
	return r;
}

function show_msg(msgTxt1,msgTxt2){  
	divMsg.innerHTML = msgTxt1;  
	btn3_Next.click();
}


function _ajaxWorkClass()
{
	var _getGameId = function(oBoss,txt){
		var r = "";
		var a = txt.split("gameid%3D");
		var b = a[1].split("&am");
		var r = b[0];
		var d = blo0.blDiv(oBoss,oBoss.id+"_getGameId","_getGameId","gray");
		d.innerHTML = r;
	};
	var _getChinesPu = function(oBoss,txt){
		var r = "";
		var a = txt.split("<pre>");
		var b = a[1].split("</pre>");
		var r = b[0];
		var d = blo0.blDiv(oBoss,oBoss.id+"_getChinesPu","d1","skyblue");
		d.innerHTML = r;
	};
	var _getBoard = function(oBoss,txt){
		var r = "";
		var a = txt.split('<td background="/images/headerbg.gif">');
		var b = a[1].split("<br><br>");
		var t1 = "/pub/flashxq.swf";
		var t2 = "http://www.xqbase.com/pub/flashxq.swf";
		var t3 = "https://littleflute.github.io/cchess/ref/http/www.xqbase.com/pub/flashxq.swf";
		var r = b[0].replace(t1,t3); 

		var d = blo0.blDiv(oBoss,oBoss.id+"_getBoard","d1","lightblue");
		d.innerHTML = r;
	};
	var _myJob = function(txt){
		_getGameId(divChess,txt);
		_getBoard(divChess,txt);
		_getChinesPu(divChess,txt);
	};
	this._2do = function(txt)
	{
		_myJob(txt);
		btn2_Save.click();
	}
}
var pageMax	= 5;
var pageIdx = 1;
var w = new _ajaxWorkClass;
var href = "http://www.xqbase.com/xqbase/?gameid=";
var toolBar = blo0.blDiv(document.body,"id_toolBar","toolBar","BlueViolet");
var btn1_Ajx = blo0.blBtn(toolBar,"btn1_Ajx","btn1_Ajx","gold");
var btn2_Save = blo0.blBtn(toolBar,"btn2_Save","btn2_Save","skyblue");
var btn3_Next = blo0.blBtn(toolBar,"btn3_Next",pageIdx,"gray");
var v = blo0.blDiv(document.body,"id_v","v","yellowgreen");
var l = blo0.blLink(v,"id_l","save","?xd=save","red"); l.style.display = "none";
_createMyNav(v);
var BaseNav = blo0.blDiv(v,"BaseNav","BaseNav","gray");
_createBaseNav(BaseNav); 
btn1_Ajx.onclick = function(){
	var ajxHref = href + pageIdx;
	blo0.blAjx(w,ajxHref);
}
btn2_Save.onclick = function(){
	l.click();
}

btn3_Next.onclick = function(){
    if(pageIdx>pageMax) return;
	pageIdx++;
	btn3_Next.innerHTML = pageIdx;
	btn1_Ajx.click();
}
 function _createMyNav(d){

	var url = "xqbase/index.html";
	var index = blo0.blLink(d,d.id+"index","index",url,"skyblue");  
	var url = "xqbase/getFromXQBASE.html";
	var getFromXQBASE = blo0.blLink(d,d.id+"getFromXQBASE","getFromXQBASE",url,"red");  
 
}
 function _createBaseNav(d){
	var i = 1;
	for (var i = 1;i<5;i++)
	{
		var color	= i%2==0?"red":"skyblue";
		var url		= "xqbase/" + i + ".html";
		var txt		= "gameid:" + i;
		var id		= "id_link_game_" + i;
		var l = blo0.blLink(d,id,txt,url,color);    
	}
 
}
</script> 
</BODY>
</HTML>
